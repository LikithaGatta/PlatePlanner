{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\sanja\\\\Downloads\\\\PlatePlanner-4\\\\my-app\\\\src\\\\components\\\\TrackMeals.tsx\",\n  _s = $RefreshSig$();\nimport { ArrowLeft, Plus, Home, Calendar, BookOpen, User, X } from 'lucide-react';\nimport { Button } from './ui/button';\nimport { Card } from './ui/card';\nimport { Input } from './ui/input';\nimport { useState, useEffect } from 'react';\nimport { useApp } from '../context/AppContext';\nimport { toast } from 'sonner';\nimport axios from \"axios\";\n\n// === API ENDPOINTS ===\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst MEAL_API = \"http://localhost:5050/api/meals\";\nconst CAL_API = \"http://localhost:5050/api/calories\";\n// Generate the last 7 days dynamically\nfunction generateWeek() {\n  const today = new Date();\n\n  // Force the week to start on Sunday\n  const startOfWeek = new Date(today);\n  startOfWeek.setDate(today.getDate() - today.getDay());\n  const days = [];\n  for (let i = 0; i < 7; i++) {\n    const d = new Date(startOfWeek);\n    d.setDate(startOfWeek.getDate() + i);\n    const dayName = d.toLocaleDateString(\"en-US\", {\n      weekday: \"short\"\n    });\n    const dateNumber = d.getDate();\n    const fullDate = d.toISOString().split(\"T\")[0];\n    days.push({\n      dayName,\n      dateNumber,\n      fullDate\n    });\n  }\n  return days;\n}\nexport function TrackMeals({\n  onNavigate\n}) {\n  _s();\n  const {\n    user,\n    saveDailyMealLog\n  } = useApp();\n\n  // --- Calendar State ---\n  const weekDays = generateWeek();\n\n  // Find today's entry in the generated week\n  const todayISO = new Date().toISOString().split(\"T\")[0];\n  const todayIndex = weekDays.findIndex(d => d.fullDate === todayISO);\n\n  // If today isn't in this week for some reason, fallback to last day\n  const [selectedDate, setSelectedDate] = useState(todayIndex !== -1 ? weekDays[todayIndex] : weekDays[6]);\n  const getDateString = () => selectedDate.fullDate;\n\n  // --- Today's meals (local + DB) ---\n  const [todayMeals, setTodayMeals] = useState({\n    date: getDateString(),\n    breakfast: [],\n    lunch: [],\n    dinner: [],\n    snacks: []\n  });\n\n  // Calorie result from backend\n  const [dayCalories, setDayCalories] = useState(null);\n\n  // Input states\n  const [breakfastInput, setBreakfastInput] = useState({\n    name: '',\n    calories: ''\n  });\n  const [lunchInput, setLunchInput] = useState({\n    name: '',\n    calories: ''\n  });\n  const [dinnerInput, setDinnerInput] = useState({\n    name: '',\n    calories: ''\n  });\n  const [snacksInput, setSnacksInput] = useState({\n    name: '',\n    calories: ''\n  });\n\n  // Show/hide inputs\n  const [showBreakfastInput, setShowBreakfastInput] = useState(false);\n  const [showLunchInput, setShowLunchInput] = useState(false);\n  const [showDinnerInput, setShowDinnerInput] = useState(false);\n  const [showSnacksInput, setShowSnacksInput] = useState(false);\n\n  // === FETCH MEALS FOR THE DAY ===\n  const fetchMealsForUser = async () => {\n    try {\n      const token = localStorage.getItem(\"token\");\n      if (!token) return;\n      const res = await axios.get(MEAL_API, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      const todayData = res.data.find(log => log.date === getDateString());\n\n      // ‚≠ê Correct: Save only today's log to the global context\n      if (todayData) {\n        saveDailyMealLog(todayData);\n      }\n      setTodayMeals(todayData || {\n        date: getDateString(),\n        breakfast: [],\n        lunch: [],\n        dinner: [],\n        snacks: []\n      });\n    } catch (err) {\n      console.error(\"FETCH ERROR:\", err);\n    }\n  };\n  useEffect(() => {\n    fetchMealsForUser();\n    setDayCalories(null); // reset calories when date changes\n  }, [selectedDate, user]);\n\n  // === ADD MEAL LOCALLY ===\n  const addMeal = mealType => {\n    let inputState;\n    let setInputState;\n    if (mealType === \"breakfast\") {\n      inputState = breakfastInput;\n      setInputState = setBreakfastInput;\n    } else if (mealType === \"lunch\") {\n      inputState = lunchInput;\n      setInputState = setLunchInput;\n    } else if (mealType === \"dinner\") {\n      inputState = dinnerInput;\n      setInputState = setDinnerInput;\n    } else {\n      inputState = snacksInput;\n      setInputState = setSnacksInput;\n    }\n    if (!inputState.name.trim()) {\n      toast.error(\"Please enter a meal name\");\n      return;\n    }\n    const calories = inputState.calories ? parseInt(inputState.calories) : 0;\n    const newMeal = {\n      name: inputState.name,\n      calories\n    };\n    setTodayMeals(prev => ({\n      ...prev,\n      [mealType]: [...prev[mealType], newMeal]\n    }));\n    setInputState({\n      name: \"\",\n      calories: \"\"\n    });\n    toast.success(`Added to ${mealType}`);\n  };\n\n  // === REMOVE MEAL ===\n  const removeMeal = (mealType, index) => {\n    setTodayMeals(prev => ({\n      ...prev,\n      [mealType]: prev[mealType].filter((_, i) => i !== index)\n    }));\n  };\n\n  // === SAVE MEALS TO DB ===\n  const handleSave = async () => {\n    try {\n      const token = localStorage.getItem(\"token\");\n      if (!token) return;\n      await axios.post(MEAL_API, todayMeals, {\n        headers: {\n          Authorization: `Bearer ${token}`,\n          \"Content-Type\": \"application/json\"\n        }\n      });\n      saveDailyMealLog(todayMeals);\n      toast.success(\"Meals saved!\");\n    } catch (err) {\n      toast.error(\"Save failed\");\n      console.error(err);\n    }\n  };\n\n  // === FETCH CALORIES FROM BACKEND ===\n  const fetchCaloriesForDay = async () => {\n    try {\n      const token = localStorage.getItem(\"token\");\n      if (!token) return;\n      const date = getDateString();\n      const res = await axios.get(`${CAL_API}/day?date=${date}`, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      setDayCalories(res.data.total);\n      alert(`Calories for ${date}: ${res.data.total}`);\n    } catch (err) {\n      alert(\"Error fetching calories\");\n      console.error(err);\n    }\n  };\n\n  // === CALCULATE LOCAL UI TOTAL ===\n  const localTotal = [...todayMeals.breakfast, ...todayMeals.lunch, ...todayMeals.dinner, ...todayMeals.snacks].reduce((sum, m) => sum + m.calories, 0);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"w-full max-w-md bg-white rounded-2xl shadow-xl overflow-hidden\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-purple-600 p-6 text-white space-y-3\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => onNavigate(\"home\"),\n        className: \"flex items-center\",\n        children: [/*#__PURE__*/_jsxDEV(ArrowLeft, {\n          className: \"w-5 h-5 mr-2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 216,\n          columnNumber: 11\n        }, this), \" Back to Home\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-between items-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"text-xl font-semibold\",\n            children: \"Track Meals\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 221,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-purple-200 text-sm\",\n            children: \"Weekly Overview\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 222,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 220,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => onNavigate(\"weekly-summary\"),\n          className: \"px-4 py-2 bg-white/20 backdrop-blur-sm rounded-lg text-sm hover:bg-white/30 transition-colors\",\n          children: \"Summary\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 226,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-6 space-y-6\",\n      children: [/*#__PURE__*/_jsxDEV(Card, {\n        className: \"p-4 border-2 border-purple-100\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"grid grid-cols-7 gap-2 text-center text-xs text-gray-500 mb-2\",\n          children: weekDays.map(d => /*#__PURE__*/_jsxDEV(\"div\", {\n            children: d.dayName\n          }, d.dateNumber, false, {\n            fileName: _jsxFileName,\n            lineNumber: 242,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 240,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"grid grid-cols-7 gap-2\",\n          children: weekDays.map((d, i) => /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setSelectedDate(d),\n            className: `aspect-square flex items-center justify-center rounded-lg ${selectedDate.dateNumber === d.dateNumber ? \"bg-purple-600 text-white shadow-md\" : \"hover:bg-gray-100 text-gray-700\"}`,\n            children: d.dateNumber\n          }, i, false, {\n            fileName: _jsxFileName,\n            lineNumber: 248,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 246,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 239,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-between text-gray-700\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Today's Meals\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 265,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [localTotal, \" cal\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 266,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 264,\n        columnNumber: 9\n      }, this), renderMealCard(\"Breakfast\", \"üç≥\", \"breakfast\", breakfastInput, setBreakfastInput, showBreakfastInput, setShowBreakfastInput, todayMeals, removeMeal, addMeal), renderMealCard(\"Lunch\", \"ü•ó\", \"lunch\", lunchInput, setLunchInput, showLunchInput, setShowLunchInput, todayMeals, removeMeal, addMeal), renderMealCard(\"Dinner\", \"üçù\", \"dinner\", dinnerInput, setDinnerInput, showDinnerInput, setShowDinnerInput, todayMeals, removeMeal, addMeal), renderMealCard(\"Snacks\", \"üçé\", \"snacks\", snacksInput, setSnacksInput, showSnacksInput, setShowSnacksInput, todayMeals, removeMeal, addMeal), /*#__PURE__*/_jsxDEV(Button, {\n        onClick: handleSave,\n        className: \"w-full bg-purple-500 text-white h-12\",\n        children: \"Save Today's Meals\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 276,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"border-t p-4 flex justify-around text-gray-500\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => onNavigate(\"home\"),\n        children: /*#__PURE__*/_jsxDEV(Home, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 284,\n          columnNumber: 52\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 284,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"text-purple-600\",\n        children: /*#__PURE__*/_jsxDEV(Calendar, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 285,\n          columnNumber: 45\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 285,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => onNavigate(\"recipe\"),\n        children: /*#__PURE__*/_jsxDEV(BookOpen, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 286,\n          columnNumber: 54\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 286,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => onNavigate(\"profile\"),\n        children: /*#__PURE__*/_jsxDEV(User, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 287,\n          columnNumber: 55\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 287,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 283,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 208,\n    columnNumber: 5\n  }, this);\n}\n\n/* Reusable meal card renderer */\n_s(TrackMeals, \"7OWQEffCHFizmyikxNR0nsXkbOE=\", false, function () {\n  return [useApp];\n});\n_c = TrackMeals;\nfunction renderMealCard(title, emoji, mealType, input, setInput, showInput, setShowInput, todayMeals, removeMeal, addMeal) {\n  return /*#__PURE__*/_jsxDEV(Card, {\n    className: \"p-4 border-2 border-gray-200\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex justify-between items-center mb-2\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex gap-2 items-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-8 h-8 bg-purple-100 rounded-lg flex items-center justify-center\",\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            children: emoji\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 312,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 311,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-gray-700\",\n          children: title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 314,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 310,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setShowInput(!showInput),\n        className: \"w-8 h-8 bg-purple-500 text-white rounded-lg flex items-center justify-center\",\n        children: /*#__PURE__*/_jsxDEV(Plus, {\n          className: \"w-4 h-4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 320,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 316,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 309,\n      columnNumber: 7\n    }, this), showInput && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"space-y-2 bg-purple-50 p-3 rounded-lg\",\n      children: [/*#__PURE__*/_jsxDEV(Input, {\n        placeholder: \"Meal name\",\n        value: input.name,\n        onChange: e => setInput({\n          ...input,\n          name: e.target.value\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 326,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Input, {\n        placeholder: \"Calories\",\n        type: \"number\",\n        value: input.calories,\n        onChange: e => setInput({\n          ...input,\n          calories: e.target.value\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 331,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        onClick: () => addMeal(mealType),\n        className: \"w-full bg-purple-600 text-white\",\n        children: \"Add\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 337,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 325,\n      columnNumber: 9\n    }, this), todayMeals[mealType].length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-center text-gray-400 bg-gray-50 p-3 rounded-lg\",\n      children: \"No meal added\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 344,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"space-y-2\",\n      children: todayMeals[mealType].map((meal, idx) => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-purple-50 p-3 rounded-lg flex justify-between\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: meal.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 350,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-purple-600 text-sm\",\n            children: [meal.calories, \" cal\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 351,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 349,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => removeMeal(mealType, idx),\n          className: \"text-red-500\",\n          children: /*#__PURE__*/_jsxDEV(X, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 354,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 353,\n          columnNumber: 15\n        }, this)]\n      }, idx, true, {\n        fileName: _jsxFileName,\n        lineNumber: 348,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 346,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 308,\n    columnNumber: 5\n  }, this);\n}\nvar _c;\n$RefreshReg$(_c, \"TrackMeals\");","map":{"version":3,"names":["ArrowLeft","Plus","Home","Calendar","BookOpen","User","X","Button","Card","Input","useState","useEffect","useApp","toast","axios","jsxDEV","_jsxDEV","MEAL_API","CAL_API","generateWeek","today","Date","startOfWeek","setDate","getDate","getDay","days","i","d","dayName","toLocaleDateString","weekday","dateNumber","fullDate","toISOString","split","push","TrackMeals","onNavigate","_s","user","saveDailyMealLog","weekDays","todayISO","todayIndex","findIndex","selectedDate","setSelectedDate","getDateString","todayMeals","setTodayMeals","date","breakfast","lunch","dinner","snacks","dayCalories","setDayCalories","breakfastInput","setBreakfastInput","name","calories","lunchInput","setLunchInput","dinnerInput","setDinnerInput","snacksInput","setSnacksInput","showBreakfastInput","setShowBreakfastInput","showLunchInput","setShowLunchInput","showDinnerInput","setShowDinnerInput","showSnacksInput","setShowSnacksInput","fetchMealsForUser","token","localStorage","getItem","res","get","headers","Authorization","todayData","data","find","log","err","console","error","addMeal","mealType","inputState","setInputState","trim","parseInt","newMeal","prev","success","removeMeal","index","filter","_","handleSave","post","fetchCaloriesForDay","total","alert","localTotal","reduce","sum","m","className","children","onClick","fileName","_jsxFileName","lineNumber","columnNumber","map","renderMealCard","_c","title","emoji","input","setInput","showInput","setShowInput","placeholder","value","onChange","e","target","type","length","meal","idx","$RefreshReg$"],"sources":["C:/Users/sanja/Downloads/PlatePlanner-4/my-app/src/components/TrackMeals.tsx"],"sourcesContent":["import { ArrowLeft, Plus, Home, Calendar, BookOpen, User, X } from 'lucide-react';\r\nimport { Button } from './ui/button';\r\nimport { Card } from './ui/card';\r\nimport { Input } from './ui/input';\r\nimport { useState, useEffect } from 'react';\r\nimport { useApp, DailyMealLog, LoggedMeal } from '../context/AppContext';\r\nimport { toast } from 'sonner';\r\nimport axios from \"axios\";\r\n\r\n// === API ENDPOINTS ===\r\nconst MEAL_API = \"http://localhost:5050/api/meals\";\r\nconst CAL_API  = \"http://localhost:5050/api/calories\";\r\n\r\ninterface TrackMealsProps {\r\n  onNavigate: (screen: any) => void;\r\n}\r\n\r\n// Generate the last 7 days dynamically\r\nfunction generateWeek() {\r\n  const today = new Date();\r\n\r\n  // Force the week to start on Sunday\r\n  const startOfWeek = new Date(today);\r\n  startOfWeek.setDate(today.getDate() - today.getDay());\r\n\r\n  const days = [];\r\n\r\n  for (let i = 0; i < 7; i++) {\r\n    const d = new Date(startOfWeek);\r\n    d.setDate(startOfWeek.getDate() + i);\r\n\r\n    const dayName = d.toLocaleDateString(\"en-US\", { weekday: \"short\" });\r\n    const dateNumber = d.getDate();\r\n    const fullDate = d.toISOString().split(\"T\")[0];\r\n\r\n    days.push({ dayName, dateNumber, fullDate });\r\n  }\r\n\r\n  return days;\r\n}\r\n\r\nexport function TrackMeals({ onNavigate }: TrackMealsProps) {\r\n  const { user, saveDailyMealLog } = useApp();\r\n\r\n  // --- Calendar State ---\r\n  const weekDays = generateWeek();\r\n\r\n  // Find today's entry in the generated week\r\n  const todayISO = new Date().toISOString().split(\"T\")[0];\r\n  const todayIndex = weekDays.findIndex((d) => d.fullDate === todayISO);\r\n\r\n  // If today isn't in this week for some reason, fallback to last day\r\n  const [selectedDate, setSelectedDate] = useState(\r\n    todayIndex !== -1 ? weekDays[todayIndex] : weekDays[6]\r\n  );\r\n\r\n  const getDateString = () => selectedDate.fullDate;\r\n\r\n  // --- Today's meals (local + DB) ---\r\n  const [todayMeals, setTodayMeals] = useState<DailyMealLog>({\r\n    date: getDateString(),\r\n    breakfast: [],\r\n    lunch: [],\r\n    dinner: [],\r\n    snacks: []\r\n  });\r\n\r\n  // Calorie result from backend\r\n  const [dayCalories, setDayCalories] = useState<number | null>(null);\r\n\r\n  // Input states\r\n  const [breakfastInput, setBreakfastInput] = useState({ name: '', calories: '' });\r\n  const [lunchInput, setLunchInput] = useState({ name: '', calories: '' });\r\n  const [dinnerInput, setDinnerInput] = useState({ name: '', calories: '' });\r\n  const [snacksInput, setSnacksInput] = useState({ name: '', calories: '' });\r\n\r\n  // Show/hide inputs\r\n  const [showBreakfastInput, setShowBreakfastInput] = useState(false);\r\n  const [showLunchInput, setShowLunchInput] = useState(false);\r\n  const [showDinnerInput, setShowDinnerInput] = useState(false);\r\n  const [showSnacksInput, setShowSnacksInput] = useState(false);\r\n\r\n  // === FETCH MEALS FOR THE DAY ===\r\n  const fetchMealsForUser = async () => {\r\n    try {\r\n      const token = localStorage.getItem(\"token\");\r\n      if (!token) return;\r\n\r\n      const res = await axios.get<DailyMealLog[]>(MEAL_API, {\r\n        headers: { Authorization: `Bearer ${token}` },\r\n      });\r\n\r\n      const todayData = res.data.find((log) => log.date === getDateString());\r\n\r\n      // ‚≠ê Correct: Save only today's log to the global context\r\n      if (todayData) {\r\n        saveDailyMealLog(todayData);\r\n      }\r\n\r\n      setTodayMeals(\r\n        todayData || {\r\n          date: getDateString(),\r\n          breakfast: [],\r\n          lunch: [],\r\n          dinner: [],\r\n          snacks: []\r\n        }\r\n      );\r\n    } catch (err) {\r\n      console.error(\"FETCH ERROR:\", err);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchMealsForUser();\r\n    setDayCalories(null); // reset calories when date changes\r\n  }, [selectedDate, user]);\r\n\r\n  // === ADD MEAL LOCALLY ===\r\n  const addMeal = (mealType: keyof DailyMealLog) => {\r\n    let inputState;\r\n    let setInputState;\r\n\r\n    if (mealType === \"breakfast\") { inputState = breakfastInput; setInputState = setBreakfastInput; }\r\n    else if (mealType === \"lunch\") { inputState = lunchInput; setInputState = setLunchInput; }\r\n    else if (mealType === \"dinner\") { inputState = dinnerInput; setInputState = setDinnerInput; }\r\n    else { inputState = snacksInput; setInputState = setSnacksInput; }\r\n\r\n    if (!inputState.name.trim()) {\r\n      toast.error(\"Please enter a meal name\");\r\n      return;\r\n    }\r\n\r\n    const calories = inputState.calories ? parseInt(inputState.calories) : 0;\r\n\r\n    const newMeal: LoggedMeal = { name: inputState.name, calories };\r\n\r\n    setTodayMeals(prev => ({\r\n      ...prev,\r\n      [mealType]: [...(prev[mealType] as LoggedMeal[]), newMeal]\r\n    }));\r\n\r\n    setInputState({ name: \"\", calories: \"\" });\r\n    toast.success(`Added to ${mealType}`);\r\n  };\r\n\r\n  // === REMOVE MEAL ===\r\n  const removeMeal = (mealType: keyof DailyMealLog, index: number) => {\r\n    setTodayMeals(prev => ({\r\n      ...prev,\r\n      [mealType]: (prev[mealType] as LoggedMeal[]).filter((_, i) => i !== index)\r\n    }));\r\n  };\r\n\r\n  // === SAVE MEALS TO DB ===\r\n  const handleSave = async () => {\r\n    try {\r\n      const token = localStorage.getItem(\"token\");\r\n      if (!token) return;\r\n\r\n      await axios.post(MEAL_API, todayMeals, {\r\n        headers: {\r\n          Authorization: `Bearer ${token}`,\r\n          \"Content-Type\": \"application/json\",\r\n        }\r\n      });\r\n\r\n      saveDailyMealLog(todayMeals);\r\n\r\n      toast.success(\"Meals saved!\");\r\n    } catch (err) {\r\n      toast.error(\"Save failed\");\r\n      console.error(err);\r\n    }\r\n  };\r\n\r\n  // === FETCH CALORIES FROM BACKEND ===\r\n  const fetchCaloriesForDay = async () => {\r\n    try {\r\n      const token = localStorage.getItem(\"token\");\r\n      if (!token) return;\r\n\r\n      const date = getDateString();\r\n\r\n      const res = await axios.get(`${CAL_API}/day?date=${date}`, {\r\n        headers: { Authorization: `Bearer ${token}` }\r\n      });\r\n\r\n      setDayCalories(res.data.total);\r\n\r\n      alert(`Calories for ${date}: ${res.data.total}`);\r\n\r\n    } catch (err) {\r\n      alert(\"Error fetching calories\");\r\n      console.error(err);\r\n    }\r\n  };\r\n\r\n  // === CALCULATE LOCAL UI TOTAL ===\r\n  const localTotal = [\r\n    ...todayMeals.breakfast,\r\n    ...todayMeals.lunch,\r\n    ...todayMeals.dinner,\r\n    ...todayMeals.snacks\r\n  ].reduce((sum, m) => sum + m.calories, 0);\r\n\r\n  return (\r\n    <div className=\"w-full max-w-md bg-white rounded-2xl shadow-xl overflow-hidden\">\r\n\r\n      {/* HEADER */}\r\n      <div className=\"bg-purple-600 p-6 text-white space-y-3\">\r\n        <button\r\n          onClick={() => onNavigate(\"home\")}\r\n          className=\"flex items-center\"\r\n        >\r\n          <ArrowLeft className=\"w-5 h-5 mr-2\" /> Back to Home\r\n        </button>\r\n\r\n        <div className=\"flex justify-between items-center\">\r\n          <div>\r\n            <h2 className=\"text-xl font-semibold\">Track Meals</h2>\r\n            <p className=\"text-purple-200 text-sm\">Weekly Overview</p>\r\n          </div>\r\n\r\n          {/* ‚≠ê NEW WEEKLY SUMMARY BUTTON */}\r\n          <button\r\n            onClick={() => onNavigate(\"weekly-summary\")}\r\n            className=\"px-4 py-2 bg-white/20 backdrop-blur-sm rounded-lg text-sm hover:bg-white/30 transition-colors\"\r\n          >\r\n            Summary\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* CONTENT */}\r\n      <div className=\"p-6 space-y-6\">\r\n\r\n        {/* CALENDAR */}\r\n        <Card className=\"p-4 border-2 border-purple-100\">\r\n          <div className=\"grid grid-cols-7 gap-2 text-center text-xs text-gray-500 mb-2\">\r\n            {weekDays.map((d) => (\r\n              <div key={d.dateNumber}>{d.dayName}</div>\r\n            ))}\r\n          </div>\r\n\r\n          <div className=\"grid grid-cols-7 gap-2\">\r\n            {weekDays.map((d, i) => (\r\n              <button\r\n                key={i}\r\n                onClick={() => setSelectedDate(d)}\r\n                className={`aspect-square flex items-center justify-center rounded-lg ${\r\n                  selectedDate.dateNumber === d.dateNumber\r\n                    ? \"bg-purple-600 text-white shadow-md\"\r\n                    : \"hover:bg-gray-100 text-gray-700\"\r\n                }`}\r\n              >\r\n                {d.dateNumber}\r\n              </button>\r\n            ))}\r\n          </div>\r\n        </Card>\r\n\r\n        {/* LOCAL TOTAL DISPLAY */}\r\n        <div className=\"flex items-center justify-between text-gray-700\">\r\n          <p>Today's Meals</p>\r\n          <div>{localTotal} cal</div>\r\n        </div>\r\n\r\n\r\n        {/* --- MEAL CARDS --- */}\r\n        {renderMealCard(\"Breakfast\", \"üç≥\", \"breakfast\", breakfastInput, setBreakfastInput, showBreakfastInput, setShowBreakfastInput, todayMeals, removeMeal, addMeal)}\r\n        {renderMealCard(\"Lunch\", \"ü•ó\", \"lunch\", lunchInput, setLunchInput, showLunchInput, setShowLunchInput, todayMeals, removeMeal, addMeal)}\r\n        {renderMealCard(\"Dinner\", \"üçù\", \"dinner\", dinnerInput, setDinnerInput, showDinnerInput, setShowDinnerInput, todayMeals, removeMeal, addMeal)}\r\n        {renderMealCard(\"Snacks\", \"üçé\", \"snacks\", snacksInput, setSnacksInput, showSnacksInput, setShowSnacksInput, todayMeals, removeMeal, addMeal)}\r\n\r\n        <Button onClick={handleSave} className=\"w-full bg-purple-500 text-white h-12\">\r\n          Save Today's Meals\r\n        </Button>\r\n\r\n      </div>\r\n\r\n      {/* NAVIGATION */}\r\n      <div className=\"border-t p-4 flex justify-around text-gray-500\">\r\n        <button onClick={() => onNavigate(\"home\")}><Home /></button>\r\n        <button className=\"text-purple-600\"><Calendar /></button>\r\n        <button onClick={() => onNavigate(\"recipe\")}><BookOpen /></button>\r\n        <button onClick={() => onNavigate(\"profile\")}><User /></button>\r\n      </div>\r\n\r\n    </div>\r\n  );\r\n}\r\n\r\n/* Reusable meal card renderer */\r\nfunction renderMealCard(\r\n  title: string,\r\n  emoji: string,\r\n  mealType: keyof DailyMealLog,\r\n  input: any,\r\n  setInput: any,\r\n  showInput: boolean,\r\n  setShowInput: any,\r\n  todayMeals: DailyMealLog,\r\n  removeMeal: any,\r\n  addMeal: any\r\n) {\r\n  return (\r\n    <Card className=\"p-4 border-2 border-gray-200\">\r\n      <div className=\"flex justify-between items-center mb-2\">\r\n        <div className=\"flex gap-2 items-center\">\r\n          <div className=\"w-8 h-8 bg-purple-100 rounded-lg flex items-center justify-center\">\r\n            <span>{emoji}</span>\r\n          </div>\r\n          <span className=\"text-gray-700\">{title}</span>\r\n        </div>\r\n        <button\r\n          onClick={() => setShowInput(!showInput)}\r\n          className=\"w-8 h-8 bg-purple-500 text-white rounded-lg flex items-center justify-center\"\r\n        >\r\n          <Plus className=\"w-4 h-4\" />\r\n        </button>\r\n      </div>\r\n\r\n      {showInput && (\r\n        <div className=\"space-y-2 bg-purple-50 p-3 rounded-lg\">\r\n          <Input\r\n            placeholder=\"Meal name\"\r\n            value={input.name}\r\n            onChange={(e) => setInput({ ...input, name: e.target.value })}\r\n          />\r\n          <Input\r\n            placeholder=\"Calories\"\r\n            type=\"number\"\r\n            value={input.calories}\r\n            onChange={(e) => setInput({ ...input, calories: e.target.value })}\r\n          />\r\n          <Button onClick={() => addMeal(mealType)} className=\"w-full bg-purple-600 text-white\">\r\n            Add\r\n          </Button>\r\n        </div>\r\n      )}\r\n\r\n      {(todayMeals[mealType] as LoggedMeal[]).length === 0 ? (\r\n        <div className=\"text-center text-gray-400 bg-gray-50 p-3 rounded-lg\">No meal added</div>\r\n      ) : (\r\n        <div className=\"space-y-2\">\r\n          {(todayMeals[mealType] as LoggedMeal[]).map((meal, idx) => (\r\n            <div key={idx} className=\"bg-purple-50 p-3 rounded-lg flex justify-between\">\r\n              <div>\r\n                <p>{meal.name}</p>\r\n                <p className=\"text-purple-600 text-sm\">{meal.calories} cal</p>\r\n              </div>\r\n              <button onClick={() => removeMeal(mealType, idx)} className=\"text-red-500\">\r\n                <X />\r\n              </button>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n    </Card>\r\n  );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}