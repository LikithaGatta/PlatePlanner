{"ast":null,"code":"var _jsxFileName = \"/Users/likithagatta/Developer/Personal Projects/PlatePlanner/my-app/src/components/CommunityForum.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { ArrowLeft, MessageSquare, Send, Plus, ThumbsUp, MessageCircle, Edit, Trash } from \"lucide-react\";\nimport { useApp } from \"../context/AppContext\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport function CommunityForum({\n  onNavigate\n}) {\n  _s();\n  const {\n    user\n  } = useApp();\n  const token = user === null || user === void 0 ? void 0 : user.token;\n  const [posts, setPosts] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [activeCategory, setActiveCategory] = useState(\"all\");\n  const [showNewPost, setShowNewPost] = useState(null);\n  const [newPostTitle, setNewPostTitle] = useState(\"\");\n  const [newPostContent, setNewPostContent] = useState(\"\");\n  const [newPostCategory, setNewPostCategory] = useState(\"recipe\");\n  const [editingPost, setEditingPost] = useState(null);\n  const [editTitle, setEditTitle] = useState(\"\");\n  const [editContent, setEditContent] = useState(\"\");\n  const [replyForms, setReplyForms] = useState({});\n  useEffect(() => {\n    if (user) {\n      fetchPosts();\n    }\n  }, [user]);\n  const fetchPosts = async () => {\n    setLoading(true);\n    try {\n      const res = await fetch(\"http://localhost:5050/api/forum\", {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      if (!res.ok) throw new Error(\"Failed to fetch\");\n      const data = await res.json();\n      setPosts(data);\n    } catch (err) {\n      console.error(err);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const createPost = async (parentId = null) => {\n    var _replyForms$parentId, _replyForms$parentId2;\n    const title = parentId ? ((_replyForms$parentId = replyForms[parentId]) === null || _replyForms$parentId === void 0 ? void 0 : _replyForms$parentId.title) || \"\" : newPostTitle;\n    const content = parentId ? ((_replyForms$parentId2 = replyForms[parentId]) === null || _replyForms$parentId2 === void 0 ? void 0 : _replyForms$parentId2.content) || \"\" : newPostContent;\n    if (!title.trim() || !content.trim()) {\n      alert(\"Please fill in both title and content\");\n      return;\n    }\n    try {\n      const res = await fetch(\"http://localhost:5050/api/forum\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${token}`\n        },\n        body: JSON.stringify({\n          title,\n          content,\n          category: newPostCategory,\n          parentId: parentId || null\n        })\n      });\n      if (!res.ok) throw new Error(\"Failed to create post\");\n      const data = await res.json();\n      if (parentId) {\n        setPosts(prev => addReply(prev, parentId, data));\n        setReplyForms(prev => {\n          const updated = {\n            ...prev\n          };\n          delete updated[parentId];\n          return updated;\n        });\n      } else {\n        setPosts(prev => [data, ...prev]);\n        setNewPostTitle(\"\");\n        setNewPostContent(\"\");\n        setNewPostCategory(\"recipe\");\n      }\n      setShowNewPost(null);\n    } catch (err) {\n      console.error(err);\n      alert(\"Failed to create post\");\n    }\n  };\n  const addReply = (postsArray, parentId, reply) => {\n    return postsArray.map(p => {\n      if (p._id === parentId) {\n        const replies = p.replies ? [...p.replies, reply] : [reply];\n        return {\n          ...p,\n          replies\n        };\n      } else if (p.replies) {\n        return {\n          ...p,\n          replies: addReply(p.replies, parentId, reply)\n        };\n      }\n      return p;\n    });\n  };\n  const toggleLike = async postId => {\n    try {\n      const res = await fetch(`http://localhost:5050/api/forum/${postId}/like`, {\n        method: \"POST\",\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      if (!res.ok) throw new Error(\"Failed to like\");\n      const data = await res.json();\n      setPosts(prev => updateLikes(prev, postId, data.likes));\n    } catch (err) {\n      console.error(err);\n    }\n  };\n  const updateLikes = (postsArray, postId, likes) => {\n    return postsArray.map(p => {\n      if (p._id === postId) return {\n        ...p,\n        likes\n      };\n      if (p.replies) return {\n        ...p,\n        replies: updateLikes(p.replies, postId, likes)\n      };\n      return p;\n    });\n  };\n  const startEdit = post => {\n    setEditingPost(post._id);\n    setEditTitle(post.title);\n    setEditContent(post.content);\n  };\n  const saveEdit = async postId => {\n    try {\n      const res = await fetch(`http://localhost:5050/api/forum/${postId}`, {\n        method: \"PUT\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${token}`\n        },\n        body: JSON.stringify({\n          title: editTitle,\n          content: editContent\n        })\n      });\n      if (!res.ok) throw new Error(\"Failed to edit\");\n      const data = await res.json();\n      setPosts(prev => updatePost(prev, postId, data));\n      setEditingPost(null);\n    } catch (err) {\n      console.error(err);\n      alert(\"Failed to edit post\");\n    }\n  };\n  const deletePost = async postId => {\n    if (!window.confirm(\"Are you sure you want to delete this post?\")) return;\n    try {\n      const res = await fetch(`http://localhost:5050/api/forum/${postId}`, {\n        method: \"DELETE\",\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      if (!res.ok) throw new Error(\"Failed to delete\");\n      setPosts(prev => removePost(prev, postId));\n    } catch (err) {\n      console.error(err);\n      alert(\"Failed to delete post\");\n    }\n  };\n  const updatePost = (postsArray, postId, updatedPost) => {\n    return postsArray.map(p => {\n      if (p._id === postId) return updatedPost;\n      if (p.replies) return {\n        ...p,\n        replies: updatePost(p.replies, postId, updatedPost)\n      };\n      return p;\n    });\n  };\n  const removePost = (postsArray, postId) => {\n    return postsArray.filter(p => p._id !== postId).map(p => p.replies ? {\n      ...p,\n      replies: removePost(p.replies, postId)\n    } : p);\n  };\n  const getCategoryColor = category => {\n    const colors = {\n      recipe: \"bg-purple-100 text-purple-700 border-purple-200\",\n      health: \"bg-green-100 text-green-700 border-green-200\",\n      tips: \"bg-blue-100 text-blue-700 border-blue-200\",\n      question: \"bg-orange-100 text-orange-700 border-orange-200\"\n    };\n    return colors[category] || \"bg-gray-100 text-gray-700 border-gray-200\";\n  };\n  const PostCard = ({\n    post,\n    depth = 0\n  }) => {\n    var _replyForms$post$_id, _replyForms$post$_id2;\n    const isOwner = (user === null || user === void 0 ? void 0 : user._id) === post.authorId;\n    const isLiked = post.likes.includes((user === null || user === void 0 ? void 0 : user._id) || \"\");\n    const isEditing = editingPost === post._id;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginLeft: depth * 20\n      },\n      className: \"mb-3\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-4 border-2 border-gray-200 rounded-lg hover:border-purple-200 transition-colors bg-white\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-between items-start mb-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm font-semibold text-gray-800\",\n              children: post.authorName\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 218,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-xs text-gray-400\",\n              children: [new Date(post.createdAt).toLocaleDateString(), \" at \", new Date(post.createdAt).toLocaleTimeString()]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 219,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 217,\n            columnNumber: 25\n          }, this), isOwner && !isEditing && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex gap-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => startEdit(post),\n              className: \"text-gray-500 hover:text-blue-600\",\n              children: /*#__PURE__*/_jsxDEV(Edit, {\n                className: \"w-4 h-4\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 226,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 225,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => deletePost(post._id),\n              className: \"text-gray-500 hover:text-red-600\",\n              children: /*#__PURE__*/_jsxDEV(Trash, {\n                className: \"w-4 h-4\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 229,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 228,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 224,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 216,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `inline-block px-2 py-1 rounded text-xs border mb-2 ${getCategoryColor(post.category)}`,\n          children: post.category.charAt(0).toUpperCase() + post.category.slice(1)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 235,\n          columnNumber: 21\n        }, this), isEditing ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            value: editTitle,\n            onChange: e => setEditTitle(e.target.value),\n            className: \"w-full px-3 py-2 border border-gray-300 rounded-lg\",\n            placeholder: \"Title\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 241,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n            value: editContent,\n            onChange: e => setEditContent(e.target.value),\n            className: \"w-full px-3 py-2 border border-gray-300 rounded-lg\",\n            rows: 3,\n            placeholder: \"Content\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 247,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex gap-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => saveEdit(post._id),\n              className: \"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700\",\n              children: \"Save\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 255,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => setEditingPost(null),\n              className: \"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300\",\n              children: \"Cancel\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 261,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 254,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 240,\n          columnNumber: 25\n        }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"mt-2 font-semibold text-gray-900\",\n            children: post.title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 271,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-gray-600 mt-1\",\n            children: post.content\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 272,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center gap-4 mt-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => toggleLike(post._id),\n              className: `flex items-center gap-1 ${isLiked ? \"text-purple-600\" : \"text-gray-500 hover:text-purple-600\"}`,\n              children: [/*#__PURE__*/_jsxDEV(ThumbsUp, {\n                className: \"w-4 h-4\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 279,\n                columnNumber: 37\n              }, this), \" \", post.likes.length]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 275,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => setShowNewPost(showNewPost === post._id ? null : post._id),\n              className: \"flex items-center gap-1 text-gray-500 hover:text-purple-600\",\n              children: [/*#__PURE__*/_jsxDEV(MessageCircle, {\n                className: \"w-4 h-4\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 285,\n                columnNumber: 37\n              }, this), \" Reply\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 281,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 274,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true), showNewPost === post._id && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-3 space-y-2 p-3 bg-gray-50 rounded-lg\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            value: ((_replyForms$post$_id = replyForms[post._id]) === null || _replyForms$post$_id === void 0 ? void 0 : _replyForms$post$_id.title) || \"\",\n            onChange: e => {\n              const value = e.target.value;\n              setReplyForms(prev => {\n                var _prev$post$_id;\n                return {\n                  ...prev,\n                  [post._id]: {\n                    title: value,\n                    content: ((_prev$post$_id = prev[post._id]) === null || _prev$post$_id === void 0 ? void 0 : _prev$post$_id.content) || \"\"\n                  }\n                };\n              });\n            },\n            placeholder: \"Reply title\",\n            className: \"w-full px-3 py-2 border border-gray-300 rounded-lg\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 293,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n            value: ((_replyForms$post$_id2 = replyForms[post._id]) === null || _replyForms$post$_id2 === void 0 ? void 0 : _replyForms$post$_id2.content) || \"\",\n            onChange: e => {\n              const value = e.target.value;\n              setReplyForms(prev => {\n                var _prev$post$_id2;\n                return {\n                  ...prev,\n                  [post._id]: {\n                    title: ((_prev$post$_id2 = prev[post._id]) === null || _prev$post$_id2 === void 0 ? void 0 : _prev$post$_id2.title) || \"\",\n                    content: value\n                  }\n                };\n              });\n            },\n            placeholder: \"Your reply...\",\n            rows: 3,\n            className: \"w-full px-3 py-2 border border-gray-300 rounded-lg\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 308,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => createPost(post._id),\n            className: \"flex items-center gap-2 px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg\",\n            children: [/*#__PURE__*/_jsxDEV(Send, {\n              className: \"w-4 h-4\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 328,\n              columnNumber: 33\n            }, this), \" Reply\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 324,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 292,\n          columnNumber: 25\n        }, this), post.replies && post.replies.map(reply => /*#__PURE__*/_jsxDEV(PostCard, {\n          post: reply,\n          depth: depth + 1\n        }, reply._id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 334,\n          columnNumber: 25\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 13\n    }, this);\n  };\n  const filteredPosts = activeCategory === \"all\" ? posts : posts.filter(p => p.category === activeCategory);\n  if (!user) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"w-full max-w-2xl mx-auto bg-white rounded-2xl shadow-xl overflow-hidden p-8\",\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-center text-gray-600\",\n        children: \"Please log in to view the forum\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 346,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 345,\n      columnNumber: 13\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"w-full max-w-2xl mx-auto bg-white rounded-2xl shadow-xl overflow-hidden\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-gradient-to-r from-purple-600 to-purple-500 p-6 text-white\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => onNavigate(\"home\"),\n        className: \"mb-4 flex items-center text-white/90 hover:text-white transition-colors\",\n        children: [/*#__PURE__*/_jsxDEV(ArrowLeft, {\n          className: \"w-5 h-5 mr-2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 359,\n          columnNumber: 21\n        }, this), \" Back to Home\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 355,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-between\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center gap-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"w-12 h-12 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center\",\n            children: /*#__PURE__*/_jsxDEV(MessageSquare, {\n              className: \"w-6 h-6\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 364,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 363,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              className: \"text-2xl font-bold\",\n              children: \"Community Forum\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 367,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-purple-100 text-sm\",\n              children: \"Share & learn together\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 368,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 366,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 362,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setShowNewPost(showNewPost === \"new\" ? null : \"new\"),\n          className: \"w-10 h-10 bg-white/20 backdrop-blur-sm rounded-lg flex items-center justify-center hover:bg-white/30 transition-colors\",\n          children: /*#__PURE__*/_jsxDEV(Plus, {\n            className: \"w-5 h-5\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 375,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 371,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 361,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 354,\n      columnNumber: 13\n    }, this), showNewPost === \"new\" && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-4 border-2 border-purple-200 bg-purple-50 m-4 rounded-lg\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        value: newPostTitle,\n        onChange: e => setNewPostTitle(e.target.value),\n        placeholder: \"Post title\",\n        className: \"w-full px-3 py-2 border border-gray-300 rounded-lg mb-2\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 383,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n        value: newPostContent,\n        onChange: e => setNewPostContent(e.target.value),\n        placeholder: \"What's on your mind?\",\n        rows: 4,\n        className: \"w-full px-3 py-2 border border-gray-300 rounded-lg mb-2\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 389,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        value: newPostCategory,\n        onChange: e => setNewPostCategory(e.target.value),\n        className: \"w-full px-3 py-2 border border-gray-300 rounded-lg mb-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"recipe\",\n          children: \"Recipe\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 401,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"health\",\n          children: \"Health\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 402,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"tips\",\n          children: \"Tips\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 403,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"question\",\n          children: \"Question\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 404,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 396,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => createPost(),\n        className: \"flex items-center gap-2 px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg\",\n        children: [/*#__PURE__*/_jsxDEV(Send, {\n          className: \"w-4 h-4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 410,\n          columnNumber: 25\n        }, this), \" Post\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 406,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 382,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex gap-2 overflow-x-auto pb-2 p-4\",\n      children: [\"all\", \"recipe\", \"health\", \"tips\", \"question\"].map(cat => /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setActiveCategory(cat),\n        className: `px-4 py-2 rounded-lg text-sm whitespace-nowrap transition-colors ${activeCategory === cat ? \"bg-purple-600 text-white\" : \"bg-gray-100 text-gray-600 hover:bg-gray-200\"}`,\n        children: cat.charAt(0).toUpperCase() + cat.slice(1)\n      }, cat, false, {\n        fileName: _jsxFileName,\n        lineNumber: 418,\n        columnNumber: 21\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 416,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-6 max-h-[600px] overflow-y-auto\",\n      children: loading ? /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-center text-gray-500\",\n        children: \"Loading posts...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 434,\n        columnNumber: 21\n      }, this) : filteredPosts.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-center text-gray-500\",\n        children: \"No posts yet. Be the first to post!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 436,\n        columnNumber: 21\n      }, this) : filteredPosts.map(post => /*#__PURE__*/_jsxDEV(PostCard, {\n        post: post\n      }, post._id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 438,\n        columnNumber: 49\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 432,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 352,\n    columnNumber: 9\n  }, this);\n}\n_s(CommunityForum, \"8pkK+LzI1EdSHQLDNoFhmmqOQqc=\", false, function () {\n  return [useApp];\n});\n_c = CommunityForum;\nvar _c;\n$RefreshReg$(_c, \"CommunityForum\");","map":{"version":3,"names":["React","useState","useEffect","ArrowLeft","MessageSquare","Send","Plus","ThumbsUp","MessageCircle","Edit","Trash","useApp","jsxDEV","_jsxDEV","Fragment","_Fragment","CommunityForum","onNavigate","_s","user","token","posts","setPosts","loading","setLoading","activeCategory","setActiveCategory","showNewPost","setShowNewPost","newPostTitle","setNewPostTitle","newPostContent","setNewPostContent","newPostCategory","setNewPostCategory","editingPost","setEditingPost","editTitle","setEditTitle","editContent","setEditContent","replyForms","setReplyForms","fetchPosts","res","fetch","headers","Authorization","ok","Error","data","json","err","console","error","createPost","parentId","_replyForms$parentId","_replyForms$parentId2","title","content","trim","alert","method","body","JSON","stringify","category","prev","addReply","updated","postsArray","reply","map","p","_id","replies","toggleLike","postId","updateLikes","likes","startEdit","post","saveEdit","updatePost","deletePost","window","confirm","removePost","updatedPost","filter","getCategoryColor","colors","recipe","health","tips","question","PostCard","depth","_replyForms$post$_id","_replyForms$post$_id2","isOwner","authorId","isLiked","includes","isEditing","style","marginLeft","className","children","authorName","fileName","_jsxFileName","lineNumber","columnNumber","Date","createdAt","toLocaleDateString","toLocaleTimeString","onClick","charAt","toUpperCase","slice","value","onChange","e","target","placeholder","rows","length","_prev$post$_id","_prev$post$_id2","filteredPosts","cat","_c","$RefreshReg$"],"sources":["/Users/likithagatta/Developer/Personal Projects/PlatePlanner/my-app/src/components/CommunityForum.tsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { ArrowLeft, MessageSquare, Send, Plus, ThumbsUp, MessageCircle, Edit, Trash } from \"lucide-react\";\nimport { useApp } from \"../context/AppContext\";\ninterface Post {\n    _id: string;\n    authorId: string;\n    authorName: string;\n    title: string;\n    content: string;\n    category: \"recipe\" | \"health\" | \"tips\" | \"question\";\n    likes: string[];\n    parentId?: string | null;\n    createdAt: string;\n    updatedAt: string;\n    replies?: Post[];\n}\n\ninterface Props {\n    onNavigate: (screen: string) => void;\n}\n\n\nexport function CommunityForum({ onNavigate }: Props) {\n    const { user } = useApp();\n    const token = user?.token;\n\n    const [posts, setPosts] = useState<Post[]>([]);\n    const [loading, setLoading] = useState(false);\n    const [activeCategory, setActiveCategory] = useState<\"all\" | \"recipe\" | \"health\" | \"tips\" | \"question\">(\"all\");\n    const [showNewPost, setShowNewPost] = useState<string | null>(null);\n    const [newPostTitle, setNewPostTitle] = useState(\"\");\n    const [newPostContent, setNewPostContent] = useState(\"\");\n    const [newPostCategory, setNewPostCategory] = useState<\"recipe\" | \"health\" | \"tips\" | \"question\">(\"recipe\");\n    const [editingPost, setEditingPost] = useState<string | null>(null);\n    const [editTitle, setEditTitle] = useState(\"\");\n    const [editContent, setEditContent] = useState(\"\");\n    const [replyForms, setReplyForms] = useState<Record<string, { title: string; content: string }>>({});\n\n    useEffect(() => {\n        if (user) {\n            fetchPosts();\n        }\n    }, [user]);\n\n    const fetchPosts = async () => {\n        setLoading(true);\n        try {\n            const res = await fetch(\"http://localhost:5050/api/forum\", {\n                headers: { Authorization: `Bearer ${token}` },\n            });\n            if (!res.ok) throw new Error(\"Failed to fetch\");\n            const data: Post[] = await res.json();\n            setPosts(data);\n        } catch (err) {\n            console.error(err);\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    const createPost = async (parentId: string | null = null) => {\n        const title = parentId ? (replyForms[parentId]?.title || \"\") : newPostTitle;\n        const content = parentId ? (replyForms[parentId]?.content || \"\") : newPostContent;\n\n        if (!title.trim() || !content.trim()) {\n            alert(\"Please fill in both title and content\");\n            return;\n        }\n\n        try {\n            const res = await fetch(\"http://localhost:5050/api/forum\", {\n                method: \"POST\",\n                headers: {\n                    \"Content-Type\": \"application/json\",\n                    Authorization: `Bearer ${token}`,\n                },\n                body: JSON.stringify({\n                    title,\n                    content,\n                    category: newPostCategory,\n                    parentId: parentId || null,\n                }),\n            });\n\n            if (!res.ok) throw new Error(\"Failed to create post\");\n            const data: Post = await res.json();\n\n            if (parentId) {\n                setPosts((prev) => addReply(prev, parentId, data));\n                setReplyForms(prev => {\n                    const updated = { ...prev };\n                    delete updated[parentId];\n                    return updated;\n                });\n            } else {\n                setPosts((prev) => [data, ...prev]);\n                setNewPostTitle(\"\");\n                setNewPostContent(\"\");\n                setNewPostCategory(\"recipe\");\n            }\n\n            setShowNewPost(null);\n        } catch (err) {\n            console.error(err);\n            alert(\"Failed to create post\");\n        }\n    };\n\n    const addReply = (postsArray: Post[], parentId: string, reply: Post): Post[] => {\n        return postsArray.map((p) => {\n            if (p._id === parentId) {\n                const replies = p.replies ? [...p.replies, reply] : [reply];\n                return { ...p, replies };\n            } else if (p.replies) {\n                return { ...p, replies: addReply(p.replies, parentId, reply) };\n            }\n            return p;\n        });\n    };\n\n    const toggleLike = async (postId: string) => {\n        try {\n            const res = await fetch(`http://localhost:5050/api/forum/${postId}/like`, {\n                method: \"POST\",\n                headers: { Authorization: `Bearer ${token}` },\n            });\n            if (!res.ok) throw new Error(\"Failed to like\");\n            const data = await res.json();\n            setPosts((prev) => updateLikes(prev, postId, data.likes));\n        } catch (err) {\n            console.error(err);\n        }\n    };\n\n    const updateLikes = (postsArray: Post[], postId: string, likes: string[]): Post[] => {\n        return postsArray.map((p) => {\n            if (p._id === postId) return { ...p, likes };\n            if (p.replies) return { ...p, replies: updateLikes(p.replies, postId, likes) };\n            return p;\n        });\n    };\n\n    const startEdit = (post: Post) => {\n        setEditingPost(post._id);\n        setEditTitle(post.title);\n        setEditContent(post.content);\n    };\n\n    const saveEdit = async (postId: string) => {\n        try {\n            const res = await fetch(`http://localhost:5050/api/forum/${postId}`, {\n                method: \"PUT\",\n                headers: {\n                    \"Content-Type\": \"application/json\",\n                    Authorization: `Bearer ${token}`,\n                },\n                body: JSON.stringify({ title: editTitle, content: editContent }),\n            });\n            if (!res.ok) throw new Error(\"Failed to edit\");\n            const data: Post = await res.json();\n            setPosts((prev) => updatePost(prev, postId, data));\n            setEditingPost(null);\n        } catch (err) {\n            console.error(err);\n            alert(\"Failed to edit post\");\n        }\n    };\n\n    const deletePost = async (postId: string) => {\n        if (!window.confirm(\"Are you sure you want to delete this post?\")) return;\n        try {\n            const res = await fetch(`http://localhost:5050/api/forum/${postId}`, {\n                method: \"DELETE\",\n                headers: { Authorization: `Bearer ${token}` },\n            });\n            if (!res.ok) throw new Error(\"Failed to delete\");\n            setPosts((prev) => removePost(prev, postId));\n        } catch (err) {\n            console.error(err);\n            alert(\"Failed to delete post\");\n        }\n    };\n\n    const updatePost = (postsArray: Post[], postId: string, updatedPost: Post): Post[] => {\n        return postsArray.map((p) => {\n            if (p._id === postId) return updatedPost;\n            if (p.replies) return { ...p, replies: updatePost(p.replies, postId, updatedPost) };\n            return p;\n        });\n    };\n\n    const removePost = (postsArray: Post[], postId: string): Post[] => {\n        return postsArray\n            .filter((p) => p._id !== postId)\n            .map((p) => (p.replies ? { ...p, replies: removePost(p.replies, postId) } : p));\n    };\n\n    const getCategoryColor = (category: string): string => {\n        const colors: Record<string, string> = {\n            recipe: \"bg-purple-100 text-purple-700 border-purple-200\",\n            health: \"bg-green-100 text-green-700 border-green-200\",\n            tips: \"bg-blue-100 text-blue-700 border-blue-200\",\n            question: \"bg-orange-100 text-orange-700 border-orange-200\"\n        };\n        return colors[category] || \"bg-gray-100 text-gray-700 border-gray-200\";\n    };\n\n    const PostCard: React.FC<{ post: Post; depth?: number }> = ({ post, depth = 0 }) => {\n        const isOwner = user?._id === post.authorId;\n        const isLiked = post.likes.includes(user?._id || \"\");\n        const isEditing = editingPost === post._id;\n\n        return (\n            <div style={{ marginLeft: depth * 20 }} className=\"mb-3\">\n                <div className=\"p-4 border-2 border-gray-200 rounded-lg hover:border-purple-200 transition-colors bg-white\">\n                    <div className=\"flex justify-between items-start mb-2\">\n                        <div>\n                            <p className=\"text-sm font-semibold text-gray-800\">{post.authorName}</p>\n                            <span className=\"text-xs text-gray-400\">\n                                {new Date(post.createdAt).toLocaleDateString()} at {new Date(post.createdAt).toLocaleTimeString()}\n                            </span>\n                        </div>\n                        {isOwner && !isEditing && (\n                            <div className=\"flex gap-2\">\n                                <button onClick={() => startEdit(post)} className=\"text-gray-500 hover:text-blue-600\">\n                                    <Edit className=\"w-4 h-4\" />\n                                </button>\n                                <button onClick={() => deletePost(post._id)} className=\"text-gray-500 hover:text-red-600\">\n                                    <Trash className=\"w-4 h-4\" />\n                                </button>\n                            </div>\n                        )}\n                    </div>\n\n                    <div className={`inline-block px-2 py-1 rounded text-xs border mb-2 ${getCategoryColor(post.category)}`}>\n                        {post.category.charAt(0).toUpperCase() + post.category.slice(1)}\n                    </div>\n\n                    {isEditing ? (\n                        <div className=\"space-y-2\">\n                            <input\n                                value={editTitle}\n                                onChange={(e) => setEditTitle(e.target.value)}\n                                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg\"\n                                placeholder=\"Title\"\n                            />\n                            <textarea\n                                value={editContent}\n                                onChange={(e) => setEditContent(e.target.value)}\n                                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg\"\n                                rows={3}\n                                placeholder=\"Content\"\n                            />\n                            <div className=\"flex gap-2\">\n                                <button\n                                    onClick={() => saveEdit(post._id)}\n                                    className=\"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700\"\n                                >\n                                    Save\n                                </button>\n                                <button\n                                    onClick={() => setEditingPost(null)}\n                                    className=\"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300\"\n                                >\n                                    Cancel\n                                </button>\n                            </div>\n                        </div>\n                    ) : (\n                        <>\n                            <h3 className=\"mt-2 font-semibold text-gray-900\">{post.title}</h3>\n                            <p className=\"text-gray-600 mt-1\">{post.content}</p>\n\n                            <div className=\"flex items-center gap-4 mt-3\">\n                                <button\n                                    onClick={() => toggleLike(post._id)}\n                                    className={`flex items-center gap-1 ${isLiked ? \"text-purple-600\" : \"text-gray-500 hover:text-purple-600\"}`}\n                                >\n                                    <ThumbsUp className=\"w-4 h-4\" /> {post.likes.length}\n                                </button>\n                                <button\n                                    onClick={() => setShowNewPost(showNewPost === post._id ? null : post._id)}\n                                    className=\"flex items-center gap-1 text-gray-500 hover:text-purple-600\"\n                                >\n                                    <MessageCircle className=\"w-4 h-4\" /> Reply\n                                </button>\n                            </div>\n                        </>\n                    )}\n\n                    {showNewPost === post._id && (\n                        <div className=\"mt-3 space-y-2 p-3 bg-gray-50 rounded-lg\">\n                            <input\n                                value={replyForms[post._id]?.title || \"\"}\n                                onChange={(e) => {\n                                    const value = e.target.value;\n                                    setReplyForms(prev => ({\n                                        ...prev,\n                                        [post._id]: {\n                                            title: value,\n                                            content: prev[post._id]?.content || \"\"\n                                        }\n                                    }));\n                                }}\n                                placeholder=\"Reply title\"\n                                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg\"\n                            />\n                            <textarea\n                                value={replyForms[post._id]?.content || \"\"}\n                                onChange={(e) => {\n                                    const value = e.target.value;\n                                    setReplyForms(prev => ({\n                                        ...prev,\n                                        [post._id]: {\n                                            title: prev[post._id]?.title || \"\",\n                                            content: value\n                                        }\n                                    }));\n                                }}\n                                placeholder=\"Your reply...\"\n                                rows={3}\n                                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg\"\n                            />\n                            <button\n                                onClick={() => createPost(post._id)}\n                                className=\"flex items-center gap-2 px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg\"\n                            >\n                                <Send className=\"w-4 h-4\" /> Reply\n                            </button>\n                        </div>\n                    )}\n\n                    {post.replies && post.replies.map((reply) => (\n                        <PostCard key={reply._id} post={reply} depth={depth + 1} />\n                    ))}\n                </div>\n            </div>\n        );\n    };\n\n    const filteredPosts = activeCategory === \"all\" ? posts : posts.filter((p) => p.category === activeCategory);\n\n    if (!user) {\n        return (\n            <div className=\"w-full max-w-2xl mx-auto bg-white rounded-2xl shadow-xl overflow-hidden p-8\">\n                <p className=\"text-center text-gray-600\">Please log in to view the forum</p>\n            </div>\n        );\n    }\n\n    return (\n        <div className=\"w-full max-w-2xl mx-auto bg-white rounded-2xl shadow-xl overflow-hidden\">\n            {/* Header */}\n            <div className=\"bg-gradient-to-r from-purple-600 to-purple-500 p-6 text-white\">\n                <button\n                    onClick={() => onNavigate(\"home\")}\n                    className=\"mb-4 flex items-center text-white/90 hover:text-white transition-colors\"\n                >\n                    <ArrowLeft className=\"w-5 h-5 mr-2\" /> Back to Home\n                </button>\n                <div className=\"flex items-center justify-between\">\n                    <div className=\"flex items-center gap-3\">\n                        <div className=\"w-12 h-12 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center\">\n                            <MessageSquare className=\"w-6 h-6\" />\n                        </div>\n                        <div>\n                            <h2 className=\"text-2xl font-bold\">Community Forum</h2>\n                            <p className=\"text-purple-100 text-sm\">Share & learn together</p>\n                        </div>\n                    </div>\n                    <button\n                        onClick={() => setShowNewPost(showNewPost === \"new\" ? null : \"new\")}\n                        className=\"w-10 h-10 bg-white/20 backdrop-blur-sm rounded-lg flex items-center justify-center hover:bg-white/30 transition-colors\"\n                    >\n                        <Plus className=\"w-5 h-5\" />\n                    </button>\n                </div>\n            </div>\n\n            {/* New Post Form */}\n            {showNewPost === \"new\" && (\n                <div className=\"p-4 border-2 border-purple-200 bg-purple-50 m-4 rounded-lg\">\n                    <input\n                        value={newPostTitle}\n                        onChange={(e) => setNewPostTitle(e.target.value)}\n                        placeholder=\"Post title\"\n                        className=\"w-full px-3 py-2 border border-gray-300 rounded-lg mb-2\"\n                    />\n                    <textarea\n                        value={newPostContent}\n                        onChange={(e) => setNewPostContent(e.target.value)}\n                        placeholder=\"What's on your mind?\"\n                        rows={4}\n                        className=\"w-full px-3 py-2 border border-gray-300 rounded-lg mb-2\"\n                    />\n                    <select\n                        value={newPostCategory}\n                        onChange={(e) => setNewPostCategory(e.target.value as \"recipe\" | \"health\" | \"tips\" | \"question\")}\n                        className=\"w-full px-3 py-2 border border-gray-300 rounded-lg mb-2\"\n                    >\n                        <option value=\"recipe\">Recipe</option>\n                        <option value=\"health\">Health</option>\n                        <option value=\"tips\">Tips</option>\n                        <option value=\"question\">Question</option>\n                    </select>\n                    <button\n                        onClick={() => createPost()}\n                        className=\"flex items-center gap-2 px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg\"\n                    >\n                        <Send className=\"w-4 h-4\" /> Post\n                    </button>\n                </div>\n            )}\n\n            {/* Category Filter */}\n            <div className=\"flex gap-2 overflow-x-auto pb-2 p-4\">\n                {([\"all\", \"recipe\", \"health\", \"tips\", \"question\"] as const).map((cat) => (\n                    <button\n                        key={cat}\n                        onClick={() => setActiveCategory(cat)}\n                        className={`px-4 py-2 rounded-lg text-sm whitespace-nowrap transition-colors ${activeCategory === cat\n                                ? \"bg-purple-600 text-white\"\n                                : \"bg-gray-100 text-gray-600 hover:bg-gray-200\"\n                            }`}\n                    >\n                        {cat.charAt(0).toUpperCase() + cat.slice(1)}\n                    </button>\n                ))}\n            </div>\n\n            {/* Posts */}\n            <div className=\"p-6 max-h-[600px] overflow-y-auto\">\n                {loading ? (\n                    <p className=\"text-center text-gray-500\">Loading posts...</p>\n                ) : filteredPosts.length === 0 ? (\n                    <p className=\"text-center text-gray-500\">No posts yet. Be the first to post!</p>\n                ) : (\n                    filteredPosts.map((post) => <PostCard key={post._id} post={post} />)\n                )}\n            </div>\n        </div>\n    );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}